{% extends 'base.html' %}
{% block content %}
<div class="container py-5" style="max-width: 800px;">
  <div class="card bg-dark text-light shadow-lg p-4 rounded-4">
    <h2 class="text-center text-info mb-3">{{ quiz.title }} â€“ Results</h2>
    <p class="text-center fs-5">You scored <strong>{{ score }}</strong> out of <strong>{{ quiz.questions.count }}</strong></p>
    <p class="text-center text-muted">Percentage: <strong>{{ percentage }}%</strong></p>
    <h4 class="text-center text-success mb-4">{{ grade_msg }}</h4>

    <hr class="border-secondary">

    <h5 class="mb-3">Question Review:</h5>
    {% for result in results %}
      <div class="mb-3 p-3 rounded" style="background-color: #2a2a2a;">
        <p><strong>Q{{ forloop.counter }}:</strong> {{ result.question }}</p>
        <p>Your Answer:
          {% if result.selected %}
            <span class="{% if result.is_correct %}text-success{% else %}text-danger{% endif %}">
              {{ result.selected }}
            </span>
          {% else %}
            <span class="text-warning">No answer selected</span>
          {% endif %}
        </p>
        <p>Correct Answer: <span class="text-info">{{ result.correct }}</span></p>
      </div>
    {% endfor %}

    <div class="text-center mt-4">
      <a href="{% url 'users:db' %}" class="btn btn-outline-info">Back to Dashboard</a>
    </div>
  </div>
</div>
{% endblock %}
