{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ quiz.title }} - Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background-color: #121212; color: #e5e5e5; font-family: 'Inter', sans-serif; padding: 40px 20px; }
    .container { max-width: 800px; margin: auto; background: #1e1e1e; padding: 40px; border-radius: 16px; box-shadow: 0 0 25px rgba(0,0,0,0.5); }
    h1 { text-align: center; font-size: 2rem; margin-bottom: 20px; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
    .score-box { background: linear-gradient(135deg, #0d6efd, #6610f2); padding: 25px; border-radius: 12px; font-size: 1.4rem; font-weight: 600; text-align: center; margin-bottom: 20px; }
    .grade-msg { text-align: center; font-size: 1.2rem; margin-bottom: 25px; color: #b5b5b5; }
    .question-result { background-color: #242424; padding: 15px 20px; border-radius: 12px; margin-bottom: 15px; }
    .correct { color: #4caf50; font-weight: 600; }
    .incorrect { color: #f44336; font-weight: 600; }
    .btn-back { display: inline-block; margin-top: 20px; padding: 12px 25px; border-radius: 8px; background: linear-gradient(90deg, #6610f2, #0d6efd); color: white; text-decoration: none; font-weight: 600; transition: 0.3s; }
    .btn-back:hover { background: linear-gradient(90deg, #0d6efd, #6610f2); transform: translateY(-2px); }
  </style>
</head>
<body>

<div class="container">
  <h1>{{ quiz.title }} - Results</h1>

  <div class="score-box">
    Score: {{ score }} / {{ results|length }} ({{ percentage }}%)
  </div>
  <p class="grade-msg">{{ grade_msg }}</p>

  <h3>Review Answers:</h3>
  {% for result in results %}
  <div class="question-result">
    <p><strong>{{ forloop.counter }}. {{ result.question }}</strong></p>
    <p>Your Answer: 
      {% if result.is_correct %}
        <span class="correct">{{ result.selected }}</span>
      {% else %}
        <span class="incorrect">{{ result.selected|default:"No Answer" }}</span>
      {% endif %}
    </p>
    {% if not result.is_correct %}
      <p>Correct Answer: <span class="correct">{{ result.correct }}</span></p>
    {% endif %}
  </div>
{% endfor %}


  <a href="{% url 'courses:quiz_list' quiz.lesson.id %}" class="btn-back">â¬… Back to Quizzes</a>
</div>

</body>
</html>
